<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<<<<<<< HEAD <head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Insert title here</title>
	<link rel="stylesheet" th:href="@{/css/home.css}">
	<link rel="stylesheet" th:href="@{/css/sidebar.css}">
	<link rel="stylesheet" th:href="@{/css/projectmodal.css}">
	<script th:src="@{/js/jquery-3.6.0.js}"></script>

	<script>
		$(document).ready(function () {
			$('#mmm').change(asd);
		})

		function check() {
			let pname = document.getElementById('pname');
			let pmember = document.getElementById('pmember').innerHTML;
			//alert(pmember);
			if (pname.value == '') {
				alert('프로젝트 제목을 입력해주세요.');
				return false;
			}

			if (pname.length < 15) {
				alert('제목은 15자리 이하로 입력하세요.')
				return false;
			}

			if (pmember == '') {
				alert('프로젝트에 참여 할 멤버를 선택해주세요.');
				return false;
			}
		}
		function clickcheck() {
			onfocus = "this.placeholder=''";
		}
		let memberNameList = '';
		let listCount = 0;

		function asd() {
			//alert($('#mmm').val());
			if (listCount == 0) {
				memberNameList += $('#mmm').val();
				listCount++;
			} else {
				memberNameList += ', ' + $('#mmm').val();
			}

			//console.log(memberNameList);
			$('#pmember').html(memberNameList); //이곳의 div 칸에다가 선택 된 value 값을 집어 넣고
			$('#pmber').val(memberNameList); //이것은 선택 된 애들을 hidden으로 보내기 위한 것
			console.log($('#pmber').val());
		}

	</script>

	<style>
		* {
			padding: 0;
			margin: 0
		}

		.men {
			background: rgba(0, 0, 0, 0.3);
		}

		body {
			background-size: cover;
			background-color: black;
		}

		.menu {
			width: 800px;
			overflow: hidden;
			margin: 150px auto;
		}

		.menu>li {
			width: 20%;
			/*20*5=100%*/
			float: left;
			text-align: center;
			line-height: 40px;
			background-color: #5778ff;
		}

		.menu a {
			color: #1b1b1b;
			font-style: normal;
			font-size: 16px;
			font-weight: bold;
		}

		.submenu>li {
			line-height: 50px;
			background-color: #94a9ff;
		}

		.submenu {
			height: 0;
			/*ul의 높이를 안보이게 처리*/
			overflow: hidden;
		}

		.menu>li:hover {
			background-color: #94a9ff;
			transition-duration: 0.5s;
		}

		.menu>li:hover .submenu {
			height: 250px;
			/*서브메뉴 li한개의 높이 50*5*/
			transition-duration: 1s;
		}

		.center {
			text-align: center;
		}

		#sub {
			display: inline-flex;
		}

		#sub2 {
			display: inline-flex;
		}

		#tess {
			text-align: center;
		}

		#goal {
			margin-top: 50px;
			width: 575px;
			height: 400px;
			border-collapse: collapse;
			border: solid;
			border-width: thin;
			margin-right: 50px;
			background-color: #C0C6CC;
			background-color: rgba(255, 255, 255, 1.0);
			border-radius: 10px 10px;

		}

		#project {
			margin-top: 50px;
			width: 575px;
			height: 400px;
			border-collapse: collapse;
			border: solid;
			border-width: thin;
			background-color: #526A80;
			background-color: rgba(255, 255, 255, 1.0);
			border-radius: 10px 10px;
			position: relative;

		}

		#user {
			margin-top: 50px;
			width: 1202px;
			height: 400px;
			border-collapse: collapse;
			border: solid;
			border-width: thin;
			background-color: #A3D4FF;
			background-color: rgba(255, 255, 255, 1.0);
			margin-bottom: 100px;
			border-radius: 10px 10px;

		}

		#g1 {
			padding: 10px;
			margin: 10px
		}

		#p1 {
			padding: 10px;
			margin: 10px
		}

		#u1 {
			padding: 10px;
			margin: 10px
		}

		#tete {
			height: 30px;
			width: 230px;
			border-radius: 4px;
			font-size: 15px;
			padding: 0 0 0 5px;
		}

		#butt {
			height: 30px;
			width: 50px;
			font-size: 16px;
			background-color: white;
		}


		#createproject {
			background-color: #C0C6CC;
			/* padding: 15px 15px; */
			border: 0;
			outline: 0;
			padding-top: 2px;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			color: #526A80;
			border-radius: 10px 10px;
			width: 180px;
			height: 30px;
			margin: 2px;
			position: absolute;
			clear: right;
			float: left;
			right: 0;
			bottom: 0px;
		}

		#createproject:hover {
			/* color: white; */
			background-color: aliceblue;
			font-weight: 700;
		}

		#pplist {
			display: inline-flex;
		}


		#tabled {
			background-color: aliceblue;
			padding: 15px 25px;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			color: #526A80;
			overflow: auto;
			border-radius: 10px 10px;
			/*  width: 150px;
		    height: 50px; */
			margin: 1px;
		}

		#tabled:hover {
			/* background-color:#C0C6CC; */
			font-weight: 700;
		}


		#projecttitle {
			margin-top: 20px;

		}

		#tbl2 {
			margin-top: 50px;
			margin-left: auto;
			margin-right: auto;
			text-align: center;

		}

		#pname {
			padding: 5px;
			border: none;
			float: left;
			width: 250px;
			height: 30px;
			border-radius: 8px 8px;

		}

		#pnotice {
			padding: 5px;
			border: none;
			float: left;
			width: 250px;
			height: 30px;
			border-radius: 8px 8px;
		}

		#ptext {
			padding: 5px;
			border: none;
			float: left;
			border-radius: 10px 10px;
		}

		#pname {
			margin-left: 10px;
			margin-bottom: 10px;
			border-collapse: collapse;
			border: solid;
			border-width: thin;
		}

		#pnotice {
			margin-left: 10px;
			margin-bottom: 10px;
			border-collapse: collapse;
			border: solid;
			border-width: thin;
		}

		#ptext {
			margin-left: 10px;
			margin-bottom: 10px;
			border-collapse: collapse;
			border: solid;
			border-width: thin;
		}

		#btn3 {
			margin: 30px auto;
			text-align: center;
			width: 180px;
			height: 30px;
			border-radius: 10px 10px;
			border: 0;
			outline: 0;
			color: #526A80;
			background-color: #C0C6CC
		}

		#btn3:hover {
			background-color: aliceblue;
			font-weight: 700;
		}

		#mmm {
			margin-top: 5px;
		}
	</style>


	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Insert title here</title>
		<link rel="stylesheet" th:href="@{/css/home.css}">
		<link rel="stylesheet" th:href="@{/css/sidebar.css}">
		<link rel="stylesheet" th:href="@{/css/header.css}">
		<link rel="stylesheet" th:href="@{/css/newWorkspace.css}">
		<!-- <script th:src="@{/js/home.js}"></script> -->
		<script th:src="@{/js/header.js}"></script>
		<script th:src="@{/js/jquery-3.6.0.js}"></script>

	</head>

	<body>
		<!-- modal -->
		<div class="modal">
			<div class="modal_body">
				<div class="newWorkspace_title">작업 공간 생성</div>
				<hr>
				<form id="workspaceForm" th:action="@{/newWorkspace}" method="post">
					<div class="newWorkspace_left">
						<table class="newWorkspace_table">
							<tr>
								<td class="newWorkspace_td-name">작업 공간 이름</td>
								<td><input type="text" id="wsname" name="wsname" class="newWorkspace_input"
										placeholder="회사 또는 팀 이름"></td>
							</tr>
							<tr>
								<td class="newWorkspace_td-name">멤버</td>
								<td><br><textarea type="text" class="newWorkspace_textarea"
										placeholder="name@company.com"></textarea></td>
							</tr>
						</table>
					</div>
					<hr>
					<div class="newWorkspace_div">
						<input type="submit" id="newWorkspace_submitbtn" value="작업 공간 생성">
					</div>
				</form>
			</div>
		</div>

		<!-- header -->
		<div class="header">
			<div class="navbar">
				<a href="#" class="menu-bars" id="show-menu">
					<img alt="sidebar" th:src="@{/img/menu.png}" width="30px">
				</a>

				<div class="navbar navbar-right">
					<input type="text" placeholder="검색" id="searchbox">
					<!-- clickable dropdown -->

					<div class="dropdown">
						<button onclick="myFunction()" class="dropbtn">+</button>
						<div id="myDropdown" class="dropdown-content my-dropdown-content">
							<a th:href="@{/}">(워크스페이스명)</a>
							<hr>
							<a th:href="@{/myWorkspaceInfo}">내 작업 공간 정보...</a>
							<!-- <a th:href="@{/seeMore}">더 보기</a> -->

							<div class="dropdown" id="seeMoreDropdown">
								<button onclick="seeMoreFunction()">더 보기</button>
								<div id="seeMoreDropdown" class="dropdown-content dropleft">
									<button class="btn-open-popup">새 작업 공간 생성</button>
									<a th:href="@{/}">이 작업 공간에서 나를 제거</a>
								</div>
							</div>


							<hr>
							<a th:href="@{/mySet}">내 설정...</a>
							<a th:href="@{/logout}">로그아웃</a>
						</div>
					</div>
				</div>
				<br>
			</div>
		</div>
		<nav id="nav-menu">
			<!-- sidebar -->
			<!-- <div id="nav-menu"> -->
			<ul class="nav-menu-items">
				<div id="navbar-toggle">
					<a href="#" class="menu-bars" id="hide-menu">
						<img alt="sidebar" th:src="@{/img/white_menu.png}" width="30px"> <i class="nav-icon"></i>
					</a>
					<a href="#">
						<h1><i id="logo"></i>Task-it</h1>
					</a>
				</div>
				<hr>
				<div class="nav-section">
					<li class="nav-text"><a th:href="@{/}"><i class="nav-icon"></i>메인</a></li>

					<li class="nav-text"><a th:href="@{/taskKanbanBoard}"><i class="nav-icon"></i>내 작업</a></li>
					<li class="nav-text"><a th:href="@{/projectView/project}"><i class="nav-icon"></i>프로젝트 목록</a>
					</li>
					<li class="nav-text"><a th:href="@{/goalView/goal}"><i class="nav-icon"></i>목표</a>
					</li>

				</div>

				<hr>
				<div class="nav-section2">
					<!--<li class="nav-text" th:wsnum="${latelyWorkspace.wsid}" th:onclick="workspaceHome(this.getAttribute('wsnum'))">
				 <i class="nav-icon"><span th:text="${latelyWorkspace.wsname}"></span></i><a th:href="@{/workspaceHome}">
				</li>  -->
					<li class="nav-text">
						<i class="nav-icon"><a th:href="@{/workspaceHome}">워크스페이스</a></i>
					</li>
					<li class="nav-text"><a href="#"><i class="nav-icon"></i>(사람들 표시)</a></li>
					<li class="nav-text"><a href="#"><i class="nav-icon"></i>(프로젝트명)</a></li>
					<li class="nav-text"><a href="#"><i class="nav-icon"></i>(프로젝트명)</a></li>
				</div>
				<hr>
				<div>
					<li class="nav-text nav-section3"><a href="#"><i class="nav-icon"></i>팀원 초대</a></li>
				</div>
			</ul>
		</nav>
		<script th:src="@{/js/sidebar.js}"></script>

		<div class="body">
			<!-- 검색태그 & 내정보 -->
			<!-- 상세정보 (가운데 상단) -->
			<div class="center">
				<div class="today-date">
					<h2>[[${month}]] 월 [[${dayOfMonth}]] 일 [[${dayOfWeek}]]</h2>

				</div>

				<div class="login-area">
					<span th:if="${userName != null}">
						<h1><span th:text="${userName}"></span> 님 안녕하세요 </h1><br>
						<a th:href="@{/logout}" class="btn btn-info active" role="button">로그아웃</a>
					</span>
					<span th:if="${userName == null}">
						<a href="/scoop/oauth2/authorization/google" class="btn btn-success active" role="button">구글로
							로그인!</a>
					</span>
					<<<<<<< HEAD </div>
				</div>
				<div id="tess">
					<div id="sub">
						<div id="goal">
							<p id="g1">내 목표</p>
						</div>
						<div id="project">
							<div>
								<p id="p1">프로젝트</p>
							</div>
							<div>
								<p><a th:href="@{/projectView/createproject}">프로젝트 생성</a></p>
							</div>
							<div>
								<table>
									<tr th:each="pplist: ${projectlist}" class="pplist" id="pplist">
										<td><a th:text="${pplist.pname}"
												th:href="@{/projectView/project(pnum=${pplist.pnum})}"></a></td>
									</tr>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- <div id="sub2">
				<div id="user">
					<p id="u1">사용자</p>
				</div>
			</div> -->
		</div>

		</div>

		<!-- modal -->
		<script>
			const body = document.querySelector('body');
			const modal = document.querySelector('.modal');
			const btnOpenPopup = document.querySelector('.btn-open-popup');

			btnOpenPopup.addEventListener('click', () => {
				modal.classList.toggle('show');

				if (modal.classList.contains('show')) {
					body.style.overflow = 'hidden';
				}
			});

			modal.addEventListener('click', (event) => {
				if (event.target === modal) {
					modal.classList.toggle('show');

					if (!modal.classList.contains('show')) {
						body.style.overflow = 'auto';
					}
				}
			});
		</script>

	</body>
	=======


	<div id="tess">
		<div id="sub">
			<div id="goal">
				<h3 id="g1">내 목표</h3>
			</div>
			<div id="project">
				<div>
					<h3 id="p1">프로젝트</h3>
				</div>

				<div>
					<div id="tbl">
						<div th:each="pplist: ${projectlist}" class="pplist" id="pplist">
							<div><a th:text="${pplist.pname}" th:href="@{/projectView/project(pnum=${pplist.pnum})}"
									id="tabled"></a></div>
						</div>
					</div>
				</div>

				<div>
					<input type="button" id="createproject" class="createproject" value="프로젝트 생성">
					<!-- <p><a th:href="@{/projectView/createproject}">프로젝트 생성</a></p> -->
				</div>

			</div>
		</div>
		<div id="sub2">
			<div id="user">
				<h3 id="u1">사용자</h3>
			</div>
		</div>
	</div>
	</div>

	<div class="projectmodal">
		<div class="modalmodal">
			<h2 id="projecttitle">프로젝트 생성</h2>
			<form th:action="@{/projectView/createproject}" method="post" onsubmit="return check()">

				<table id="tbl2">
					<tr id="inputname">
						<th><input type="text" maxlength='16' name="pname" id="pname" placeholder="프로젝트 이름 입력"></th>
					</tr>

					<tr id="selectmember">
						<th>
							<p>멤버 선택</p>
							<select id="mmm" name="memberselect">
								<!-- <option id="choose">선택</option> -->
								<option th:each="val: ${ulist}" th:value="${val.email}" th:utext="${val.email}">
								</option>
							</select>

						</th>
					</tr>

					<tr>
						<th>
							<div id="pmember"></div>
						</th>
					</tr>

					<tr id="inputbtn">
						<th colspan="2" id="btn"><input type="submit" value="프로젝트 생성" id="btn3"></th>

					</tr>
				</table>
				<input type="hidden" name="pmember" id="pmber">
			</form>
		</div>
	</div>

	</div>
	</div>

	<script th:src="@{/js/projectmodal.js}"></script>

	</body>

</html>