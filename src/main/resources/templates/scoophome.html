<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Insert title here</title>
	<link rel="stylesheet" th:href="@{/css/home.css}">
	<link rel="stylesheet" th:href="@{/css/sidebar.css}">
	<link rel="stylesheet" th:href="@{/css/header.css}">
	<link rel="stylesheet" th:href="@{/css/newWorkspace.css}">
	<script th:src="@{/js/header.js}"></script>
	<script th:src="@{/js/home.js}"></script>
<script th:src="@{/js/jquery-3.6.0.js}"></script>
</head>

<body>
	<!-- modal -->
	<div class="modal">
		<div class="modal_body">
			<div class="newWorkspace_title">작업 공간 생성</div>
			<hr>
			<form id="workspaceForm" th:action="@{/newWorkspace}" method="post">
				<div class="newWorkspace_left">
					<table class="newWorkspace_table">
						<tr>
							<td class="newWorkspace_td-name">작업 공간 이름</td>
							<td><input type="text" id="wsname" name="wsname" class="newWorkspace_input" placeholder="회사 또는 팀 이름"></td>
						</tr>
						<tr>
							<td class="newWorkspace_td-name">멤버</td>
							<td><br><textarea type="text" class="newWorkspace_textarea" placeholder="name@company.com"></textarea></td>
						</tr>
					</table>
				</div>
				<hr>
				<div class="newWorkspace_div" >
					<input type="submit" id="newWorkspace_submitbtn" value="작업 공간 생성">
				</div>
			</form>
		</div>
   	</div>
   	
	<!-- header -->
	<div class="header">
		<div class="navbar">
			<a href="#" class="menu-bars" id="show-menu">
				<img alt="sidebar" th:src="@{/img/menu.png}" width="30px">
			</a>
			
			<div class="navbar navbar-right">
				<input type="text" placeholder="검색" id="searchbox">
				
				<!-- clickable dropdown -->
				<div class="dropdown">
					<button onclick="addFunction()" class="dropbtn">+</button>
					<div id="dropdown" class="dropdown-content">
						<a th:href="@{/}">작업</a>
						<a th:href="@{/}">프로젝트</a>
						<a th:href="@{/}">메시지</a>
						<a th:href="@{/}">초대</a>
					</div>
				</div>
				
				<div class="dropdown">
					<button onclick="myFunction()" class="dropbtn">+</button>
					<div id="myDropdown" class="dropdown-content my-dropdown-content">
						<a th:href="@{/}">(워크스페이스명)</a>
						<hr>
						<a th:href="@{/myWorkspaceInfo}">내 작업 공간 정보...</a>
						<!-- <a th:href="@{/seeMore}">더 보기</a> -->
						
						<div class="dropdown" id="seeMoreDropdown">
							<button onclick="seeMoreFunction()">더 보기</button>
							<div id="seeMoreDropdown" class="dropdown-content dropleft">
								<button class="btn-open-popup">새 작업 공간 생성</button>
								<a th:href="@{/}">이 작업 공간에서 나를 제거</a>
							</div>
						</div>
						
						
						<hr>
						<a th:href="@{/mySet}">내 설정...</a>
						<a th:href="@{/logout}">로그아웃</a>
					</div>
				</div>
			</div>
			<br>
		</div>
	</div>
	
	<!-- sidebar -->
	<div id="nav-menu">
		<ul class="nav-menu-items">
			<div id="navbar-toggle">
				<a href="#" class="menu-bars" id="hide-menu">
					<img alt="sidebar" th:src="@{/img/white_menu.png}" width="30px"> <i class="nav-icon"></i>
				</a>
				<a href="#">
					<h1><i id="logo"></i>Task-it</h1>
				</a>
			</div>
			<hr>
			<div class="nav-section">
				<li class="nav-text"><a th:href="@{/}"><i class="nav-icon"></i>메인</a></li>
				<li class="nav-text"><a href="#"><i class="nav-icon"></i>내 작업</a></li>
				<li class="nav-text"><a th:href="@{/projectView/project}"><i class="nav-icon"></i>프로젝트 목록</a></li>
				<li class="nav-text"><a th:href="@{/goalView/goal}"><i class="nav-icon"></i>목표</a></li>
			</div>
			<hr>
			<div class="nav-section2">
				<!-- <li class="nav-text" th:wsnum="${latelyWorkspace.wsid}" th:onclick="workspaceHome(this.getAttribute('wsnum'))">
					<i class="nav-icon"><span th:text="${latelyWorkspace.wsname}"></span></i><a th:href="@{/workspaceHome}">
				</li> -->
				<li class="nav-text">
					<i class="nav-icon"><a th:href="@{/workspaceHome}">워크스페이스</a></i>
				</li>
				<li class="nav-text"><a href="#"><i class="nav-icon"></i>(사람들 표시)</a></li>
				<li class="nav-text"><a href="#"><i class="nav-icon"></i>(프로젝트명)</a></li>
				<li class="nav-text"><a href="#"><i class="nav-icon"></i>(프로젝트명)</a></li>
			</div>
			<hr>
			<div>
				<li class="nav-text nav-section3"><a href="#"><i class="nav-icon"></i>팀원 초대</a></li>
			</div>
		</ul>
	</div>
	<script th:src="@{/js/sidebar.js}"></script>

	<div class="body">
		<br>
		<div class="today-date">
			<h2>[[${month}]] 월 [[${dayOfMonth}]] 일 [[${dayOfWeek}]]</h2>

		</div>

		<div class="login-area">
			<span th:if="${userName != null}">
				<h1><span th:text="${userName}"></span> 님 안녕하세요 </h1><br>
				<a th:href="@{/logout}" class="btn btn-info active" role="button">로그아웃</a>
			</span>
			<span th:if="${userName == null}">
				<a href="/scoop/oauth2/authorization/google" class="btn btn-success active"
					role="button">구글로 로그인!</a>
			</span>
		</div>

		<div id="tess">
			<div id="sub">
				<div id="goal">
					<p id="g1">내 목표</p>
				</div>
				<div id="project">
					<div>
						<p id="p1">프로젝트</p>
					</div>
					<div>
						<p><a th:href="@{/projectView/createproject}">프로젝트 생성</a></p>
					</div>
					<div>
						<table>
							<tr th:each="pplist: ${projectlist}" class="pplist" id="pplist">
								<td><a th:text="${pplist.pname}"
										th:href="@{/projectView/project(pnum=${pplist.pnum})}"></a></td>
							</tr>
						</table>
					</div>
				</div>
				<div id="sub2">
					<div id="user">
						<p id="u1">사용자</p>
					</div>
				</div>
			</div>
		</div>
	</div>	
	
	<!-- modal -->
	<script>
	    const body = document.querySelector('body');
	    const modal = document.querySelector('.modal');
	    const btnOpenPopup = document.querySelector('.btn-open-popup');
	
	    btnOpenPopup.addEventListener('click', () => {
	      modal.classList.toggle('show');
	
	      if (modal.classList.contains('show')) {
	        body.style.overflow = 'hidden';
	      }
	    });
	
	    modal.addEventListener('click', (event) => {
	      if (event.target === modal) {
	        modal.classList.toggle('show');
	
	        if (!modal.classList.contains('show')) {
	          body.style.overflow = 'auto';
	        }
	      }
	    });
	 </script>
</body>

</html>
